{"version":3,"file":"src_pages_Organization_AdminLogin_tsx.js","mappings":"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","sources":["webpack://atlp-pulse-fn/./src/pages/Organization/AdminLogin.tsx","webpack://atlp-pulse-fn/./src/pages/Organization/LoginMutation.tsx"],"sourcesContent":["/* eslint-disable */\nimport { useApolloClient, useMutation } from '@apollo/client';\nimport React, { useContext, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useTranslation } from 'react-i18next';\nimport { FaGoogle, FaRegEnvelope, FaRegEye } from 'react-icons/fa';\nimport { FcGoogle } from 'react-icons/fc';\nimport { FiEyeOff } from 'react-icons/fi';\nimport { MdLockOutline } from 'react-icons/md';\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\nimport { toast, ToastContent } from 'react-toastify';\nimport ButtonLoading from '../../components/ButtonLoading';\nimport Button from '../../components/Buttons';\nimport { UserContext } from '../../hook/useAuth';\nimport useDocumentTitle from '../../hook/useDocumentTitle';\nimport LOGIN_MUTATION from './LoginMutation';\n\nfunction AdminLogin() {\n  const orgToken: any = localStorage.getItem('orgToken');\n  const orgName: any = localStorage.getItem('orgName');\n  useDocumentTitle('Login');\n  const { t } = useTranslation();\n  const [passwordShown, setPasswordShown] = useState(false);\n  /* istanbul ignore next */\n  const tooglePassword = () => {\n    setPasswordShown(!passwordShown);\n  };\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    setError,\n  }: any = useForm();\n  const { login } = useContext(UserContext);\n  const navigate = useNavigate();\n  const { state } = useLocation();\n  const [LoginUser, { loading }] = useMutation(LOGIN_MUTATION);\n  const client = useApolloClient();\n  const onSubmit = async (userInput: any) => {\n    userInput.orgToken = orgToken;\n    try {\n      const { data }: any = await LoginUser({\n        variables: { loginInput: userInput },\n\n        onCompleted: async (data) => {\n          /* istanbul ignore next */\n          toast.success(data.addMemberToCohort);\n           /* istanbul ignore next */\n          login(data.loginUser);\n           /* istanbul ignore next */\n          await client.resetStore();\n           /* istanbul ignore next */\n          toast.success(t(`Welcome`) as ToastContent<unknown>);\n          if (state) {\n            navigate(`${state}`);\n          } else {\n            navigate('/dashboard/');\n          }\n           /* istanbul ignore if */\n          if (data.loginUser) {\n            //navigate to ${state},in case you want to make it default (/dashboard),  \n             /* istanbul ignore next */\n            {data.loginUser.user.role === 'superAdmin'? \n            navigate(`/dashboard/organizations`):(data.loginUser.user.role === \"admin\")? \n            navigate(`/dashboard/trainees`):(data.loginUser.user.role === 'coordinator')? \n            navigate(`/dashboard/trainees`):(data.loginUser.user.role === 'manager')? \n            navigate(`/dashboard/coordinators`): navigate('/dashboard/performance') }\n          } \n           /* istanbul ignore next */\n          return;\n        },\n        onError: (err) => {\n          /* istanbul ignore next */\n          if (err.message.toLowerCase() !== 'invalid credential') {\n            toast.error(err.message);\n          } else {\n             /* istanbul ignore next */\n            setError('password', {\n              type: 'custom',\n              message: t('Invalid credentials'),\n            });\n            /* istanbul ignore next */\n            setError('email', {\n              type: 'custom',\n              message: t('Invalid credentials'),\n            });\n          }\n        },\n      });\n    } catch (error: any) {\n      /* istanbul ignore next */\n      setError('password', {\n        type: 'custom',\n        message: t('Invalid credentials'),\n      });\n      /* istanbul ignore next */\n      setError('email', {\n        type: 'custom',\n        message: t('Invalid credentials'),\n      });\n    }\n  };\n\n  return (\n    <div className=\"w-full text-center py-2  dark:bg-dark-bg bg-gray-100  sm:flex sm:items-center sm:justify-center h-full\">\n      <div className=\"md:rounded-xl md:shadow-xl md:w-full mt-20 sm:max-w-xl sm:rounded-none sm:shadow-none dark:shadow-2xl mb-8\">\n        <div className=\"py-10 sm:py-8 \">\n          <h2 className=\"text-2xl font-bold text-primary dark:text-dark-text-fill \">\n            {t('Welcome to')} {orgName}\n          </h2>\n          <div className=\"border-[1px] w-10 bg-primary border-primary inline-block mb-2\" />\n          <div className=\" text-sm text-center dark:text-dark-text-fill\">\n            <Link\n              to=\"/login/org\"\n              className=\"mx-1 text-primary\"\n              data-testid=\"switch\"\n            >\n              {t('Switch')} {t('your organization')}\n            </Link>\n          </div>\n\n          <div className=\"flex flex-col items-center\">\n            <form\n              action=\"#none\"\n              onSubmit={handleSubmit(onSubmit)}\n              data-testid=\"loginForm\"\n            >\n              <div className=\"w-full border border-gray rounded-md bg-gray-100 p-2 my-4 flex items-center mb-2 dark:bg-dark-bg \">\n                <FaRegEnvelope className=\"text-gray-400 mr-2\" />\n                <input\n                  data-testid=\"email\"\n                  type=\"email\"\n                  {...register('email', { required: 'Email is required' })}\n                  placeholder={t('Email')}\n                  className=\"bg-gray-100 outline-none text-sm flex-1 px-2 dark:border-white dark:bg-dark-bg dark:text-white \"\n                />\n              </div>\n              <div className=\"text-left mb-1 pl-4\">\n                {errors.email && (\n                  <small className=\"text-red-600\">{errors.email.message}</small>\n                )}\n              </div>\n\n              <div className=\"md:w-full border border-gray rounded-md bg-gray-100 p-2 my-4 flex items-center  mb-2 dark:border-white dark:bg-dark-bg\">\n                <MdLockOutline className=\"text-gray-400 mr-2 \" />\n                <input\n                  data-testid=\"password\"\n                  type={passwordShown ? 'text' : 'password'}\n                  {...register('password', {\n                    required: 'Password is required',\n                  })}\n                  placeholder={t('Password')}\n                  className=\"bg-gray-100 outline-none text-sm flex-1 dark:border-white dark:bg-dark-bg dark:text-white\"\n                />\n                <div className=\"text-gray-400 cursor-pointer onClick= {()=> handleShowPassword}\">\n                  {passwordShown ? (\n                    <FaRegEye onClick={tooglePassword} />\n                  ) : (\n                    <FiEyeOff onClick={tooglePassword} />\n                  )}\n                </div>\n              </div>\n              <div className=\"text-left mb-1 pl-4\">\n                {errors.password ? (\n                  <small className=\"text-red-600\">\n                    {errors.password.message}\n                  </small>\n                ) : (\n                  ''\n                )}\n              </div>\n              <div className=\"flex w-64 justify-between rounded mb-5 mt-5\">\n                <label\n                  htmlFor=\"checkbox\"\n                  className=\"flex items-center text-xs dark:text-dark-text-fill \"\n                >\n                  <input\n                    type=\"checkbox\"\n                    name=\"remember\"\n                    className=\"mr-1  dark:text-dark-text-fill dark:border-white dark:bg-dark-frame-bg\"\n                  />\n                  {t('Remember me')}\n                </label>\n                <Link\n                  to=\"/reset-password\"\n                  className=\"text-xs dark:text-dark-text-fill \"\n                >\n                  {t('Forgot Password?')}\n                </Link>\n              </div>\n              <div className=\"w-full justify-center ml-[-7px]\">\n                {loading ? (\n                  <ButtonLoading style={'rounded-full inline-block'} />\n                ) : (\n                  <Button\n                    type=\"submit\"\n                    variant=\"transparentbtn\"\n                    size=\"md\"\n                    style=\" w-full bg-primary inline-block rounded-md lg:px-12 lg:py-2 sm:px-4 sm:py-1 md:font-semibold sm:mt-2 sm:font-medium text-white\"\n                  >\n                    {t('Sign In')}\n                  </Button>\n                )}\n              </div>\n            </form>\n          </div>\n\n          <div className=\"my-4 text-sm text-center dark:text-dark-text-fill\">\n            {t('First time here?')}\n            <Link to=\"/signup/org\" className=\"mx-1 text-primary\">\n              {t('Register')}\n            </Link>\n            {t('your organization')}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default AdminLogin;\n","import { gql } from '@apollo/client';\n\nconst LOGIN_MUTATION = gql`\n  mutation Mutation($loginInput: LoginInput) {\n    loginUser(loginInput: $loginInput) {\n      token\n      user {\n        id\n        role\n        email\n        password\n        profile {\n          id\n          firstName\n          lastName\n          user {\n            id\n            role\n            email\n            password\n            profile {\n              id\n              firstName\n              lastName\n              name\n              address\n              city\n              country\n              phoneNumber\n              biography\n              avatar\n              cover\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport default LOGIN_MUTATION;\n"],"names":[],"sourceRoot":""}